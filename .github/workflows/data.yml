name: "ğŸ›¡ï¸ DefenderBot DataOps Batch"

on:
  push:
    branches: [ "main" ]
  workflow_dispatch:
    inputs:
      release_tag:
        description: "Release tag override (ex: v1.2.3)."
        required: false
        default: ""
      image_tag:
        description: "Docker image tag override."
        required: false
        default: ""
      upgrade:
        description: "ì›ê²© ì—…ê·¸ë ˆì´ë“œ ì‹œë„ ì—¬ë¶€(true/false)."
        required: false
        default: "true"
      distro_image:
        description: "ì¶”ê°€ base ì´ë¯¸ì§€ ë¹Œë“œ (ubuntu|ubi|none)."
        required: false
        default: "none"
      variant:
        description: "DefenderBot ì‹¤í–‰ ëª¨ë“œ ë¼ë²¨."
        required: false
        default: "dataops"
  schedule:
    - cron: "30 15 * * *"

permissions:
  contents: write
  packages: write
  id-token: write

jobs:
  defenderbot-dataops:
    name: "DefenderBot DataOps Pipeline"
    uses: ./.github/workflows/defenderbot.yml
    with:
      release_tag: ${{ github.event.inputs.release_tag || '' }}
      image_tag: ${{ github.event.inputs.image_tag || '' }}
      upgrade: ${{ github.event.inputs.upgrade || 'true' }}
      distro_image: ${{ github.event.inputs.distro_image || 'none' }}
      variant: ${{ github.event.inputs.variant || 'dataops' }}
    secrets: inherit
