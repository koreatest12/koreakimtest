name: Download Apache Maven

on:
  workflow_dispatch:

jobs:
  fetch-maven:
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        maven-version:
          - '3.9.0'
          - '3.9.1'
          - '3.9.2'
          - '3.9.3'
          - '3.9.4'
          - '3.9.5'
          - '3.9.6'
    env:
      MAVEN_BASE_URL: https://archive.apache.org/dist/maven/maven-3
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Create dump directory
        run: mkdir -p dump

      - name: Determine Maven download URL
        id: maven
        run: |
          VERSION="${{ matrix.maven-version }}"
          echo "version=$VERSION" >> "$GITHUB_OUTPUT"
          echo "url=$MAVEN_BASE_URL/${VERSION}/binaries/apache-maven-${VERSION}-bin.tar.gz" >> "$GITHUB_OUTPUT"

      - name: Download Apache Maven archive
        run: |
          curl -fL "${{ steps.maven.outputs.url }}" -o "dump/apache-maven-${{ steps.maven.outputs.version }}-bin.tar.gz"

      - name: List dump directory contents
        run: ls -lh dump
