version: 2

# ======================================================
# ğŸ›¡ï¸ Global Configuration
# ======================================================
# ëª¨ë“  ì—…ë°ì´íŠ¸ ì‘ì—…ì— ê³µí†µìœ¼ë¡œ ì ìš©ë˜ëŠ” ì„¤ì •ì…ë‹ˆë‹¤.
registries:
  dockerhub:
    type: docker-registry
    url: registry.hub.docker.com
    # ë¹„ê³µê°œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ì‚¬ìš© ì‹œ ì•„ë˜ ì£¼ì„ í•´ì œ í›„ secrets ë“±ë¡ í•„ìš”
    # username: ${{ secrets.DOCKER_USERNAME }}
    # password: ${{ secrets.DOCKER_PASSWORD }}

updates:
  # ======================================================
  # 1. GitHub Actions Workflows (CI/CD íŒŒì´í”„ë¼ì¸)
  # ======================================================
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "daily"   # ë§¤ì¼ ì ê²€
      time: "00:00"       # í•œêµ­ ì‹œê°„ ì˜¤ì „ 9ì‹œ (UTC 00:00)
      timezone: "Asia/Seoul"
    open-pull-requests-limit: 10
    labels:
      - "ci-cd"
      - "actions"
      - "automated-update"
    groups:
      github-actions:
        patterns:
          - "*" # ëª¨ë“  ì•¡ì…˜ ì—…ë°ì´íŠ¸ë¥¼ í•˜ë‚˜ì˜ PRë¡œ ë¬¶ìŒ (ë…¸ì´ì¦ˆ ê°ì†Œ)

  # ======================================================
  # 2. Docker (Dockerfile & Kubernetes Manifests)
  # ======================================================
  - package-ecosystem: "docker"
    directory: "/"
    schedule:
      interval: "daily"
      time: "00:00"
      timezone: "Asia/Seoul"
    open-pull-requests-limit: 10
    labels:
      - "docker"
      - "container"
      - "infrastructure"
    # Docker íƒœê·¸ ì „ëµ (SemVer ì¤€ìˆ˜)
    versioning-strategy: increase-if-necessary

  # ======================================================
  # 3. Java / Maven (Spring Boot Backend)
  # ======================================================
  - package-ecosystem: "maven"
    directory: "/"
    schedule:
      interval: "daily"
      time: "00:00"
      timezone: "Asia/Seoul"
    open-pull-requests-limit: 10
    target-branch: "main"
    labels:
      - "java"
      - "spring-boot"
      - "backend"
    # ê·¸ë£¹í™”: ìŠ¤í”„ë§ ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” í•œ ë²ˆì— ì—…ë°ì´íŠ¸
    groups:
      spring-boot:
        patterns:
          - "org.springframework.boot:*"
          - "org.springframework:*"
      junit:
        patterns:
          - "org.junit.jupiter:*"
          - "org.mockito:*"

  # ======================================================
  # 4. Python / Pip (Data Pipeline)
  # ======================================================
  - package-ecosystem: "pip"
    directory: "/" # requirements.txt ìœ„ì¹˜
    schedule:
      interval: "daily"
      time: "00:00"
      timezone: "Asia/Seoul"
    open-pull-requests-limit: 10
    labels:
      - "python"
      - "data-pipeline"
    groups:
      data-science:
        patterns:
          - "pandas"
          - "numpy"
          - "scikit-learn"

  # ======================================================
  # 5. Gradle (Optional: Gradle ì‚¬ìš© ì‹œ í™œì„±í™”)
  # ======================================================
  # - package-ecosystem: "gradle"
  #   directory: "/"
  #   schedule:
  #     interval: "daily"
  #     time: "00:00"
  #     timezone: "Asia/Seoul"
